# Release Notes - Version 7.9.0

## New Features

### Secrets Management System (`mcli lib secrets`)
- Added comprehensive encrypted secrets management with git-based synchronization
- Features include:
  - **Encryption**: Secure local storage using Fernet encryption
  - **Namespaces**: Organize secrets by namespace/environment
  - **Git Sync**: Push/pull secrets to/from a git repository for cross-machine access
  - **Import/Export**: Convert between `.env` files and encrypted storage
  - **Interactive REPL**: Launch with `mcli lib secrets repl` for an interactive shell

### ZSH Integration (`mcli self zsh`)
- Added dedicated ZSH shell integration commands
- Features include:
  - **Auto-configuration**: Set up aliases, completion, and environment with one command
  - **Aliases**: Convenient shortcuts (m, mc, mw, ms, mls, mlsr)
  - **Prompt Integration**: Add MCLI status to your ZSH prompt
  - **Custom Functions**: Install helpful ZSH functions for MCLI
  - **Integration Testing**: Verify your ZSH setup is working correctly

## Changes

### Library Group (`mcli lib`)
- Added new `lib` command group for library utilities
- Currently contains the `secrets` subcommand group
- Provides a dedicated namespace for library-level tools

### Dependencies
- Added `prompt-toolkit` for enhanced REPL experience
- Updated FastAPI to 0.114.2 for compatibility
- Updated Pydantic to 2.5.3 for compatibility

## Bug Fixes
- Fixed import issues with GlobalConfig references
- Resolved FastAPI/Pydantic version compatibility issues

## Technical Details

### New Modules
- `src/mcli/lib/secrets/` - Complete secrets management implementation
  - `manager.py` - Core encryption and storage logic
  - `store.py` - Git synchronization functionality
  - `repl.py` - Interactive shell implementation
  - `commands.py` - Click CLI commands
- `src/mcli/self/zsh_cmd.py` - ZSH integration commands

### Command Structure
```
mcli lib
└── secrets
    ├── repl      # Interactive shell
    ├── set       # Set a secret
    ├── get       # Get a secret
    ├── list      # List secrets
    ├── delete    # Delete a secret
    ├── export    # Export to env format
    ├── import    # Import from env file
    └── store     # Git sync commands
        ├── init   # Initialize store
        ├── push   # Push to remote
        ├── pull   # Pull from remote
        ├── sync   # Pull then push
        └── status # Show store status

mcli self zsh
├── config     # Configure ZSH integration
├── aliases    # Show available aliases
├── prompt     # Configure prompt
├── functions  # Install ZSH functions
└── test       # Test integration
```

## Migration Guide

To start using the new secrets management:

1. Initialize your secrets store:
   ```bash
   mcli lib secrets store init --remote git@github.com:yourusername/mcli-secrets.git
   ```

2. Set your first secret:
   ```bash
   mcli lib secrets set api-key "your-secret-value"
   ```

3. Or use the interactive REPL:
   ```bash
   mcli lib secrets repl
   ```

To set up ZSH integration:

```bash
mcli self zsh config
source ~/.zshrc
```

## Contributors
- Luis Fernandez de la Vara