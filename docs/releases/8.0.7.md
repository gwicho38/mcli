# Release Notes - Version 8.0.7

**Release Date:** 2026-01-21

## Overview

Version 8.0.7 is a patch release that fixes failing unit tests related to async test configuration and test mocking issues.

## Bug Fixes

### Async Test Configuration Fix

**Issue:** 32 unit tests were failing with "async def functions are not natively supported" error.

**Root Cause:** The `pytest-asyncio` package was specified in `pyproject.toml` but was not being installed in the test environment.

**Fix:**
- Ensured `pytest-asyncio` dependency is properly installed
- Updated `uv.lock` to include `pytest-asyncio>=1.3.0`

**Affected Tests:**
- `tests/unit/storage/test_cache.py` - 16 tests
- `tests/unit/test_async_process_manager.py` - 15 tests
- `tests/unit/test_dependencies.py::TestOptionalRedisImport::test_cached_vectorizer_works_without_redis` - 1 test

### Store Command Test Fix

**Issue:** `test_init_already_exists` was failing because it expected "already exists" message but received success message.

**Root Cause:** The `DEFAULT_STORE_PATH` constant is evaluated at module import time, before the `Path.home()` mock could take effect. This caused the test to check the real home directory instead of the mocked temp directory.

**Fix:** Added explicit patch for `DEFAULT_STORE_PATH` in the test to ensure the mocked path is used.

**File Modified:** `tests/unit/test_store_cmd.py`

## Test Suite Status

| Metric | Before | After |
|--------|--------|-------|
| Passing | 741 | 774 |
| Failing | 33 | 0 |
| Skipped | 52 | 52 |
| Pass Rate | 95.7% | 100% |

## Technical Changes

### Files Modified

- `tests/unit/test_store_cmd.py` - Added `DEFAULT_STORE_PATH` patch to `test_init_already_exists`
- `uv.lock` - Updated to include `pytest-asyncio` dependency
- `pyproject.toml` - Version bump to 8.0.7

### Dependencies

No new dependencies added. Existing `pytest-asyncio>=1.1.0` dependency is now properly resolved in the lockfile.

## Upgrade Guide

No breaking changes. Simply update to the new version:

```bash
pip install --upgrade mcli-framework
# or
uv pip install --upgrade mcli-framework
```

## Verification

After upgrading, verify your installation:

```bash
mcli self version
# Should show: 8.0.7
```

## Links

- **PyPI**: https://pypi.org/project/mcli-framework/8.0.7/
- **GitHub Release**: https://github.com/gwicho38/mcli/releases/tag/v8.0.7
- **Full Changelog**: https://github.com/gwicho38/mcli/compare/v8.0.6...v8.0.7
