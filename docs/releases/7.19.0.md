# Release 7.19.0

**Release Date:** 2025-11-24

## Summary

This release improves CLI UX with reordered commands and fixes critical notebook discovery bugs in `.mcli` directories.

## Changes

### Features

#### Command Reordering for Better UX
- **Reordered top-level commands** to follow logical workflow progression
- New command order: `init`, `new`, `edit`, `delete`, `self`, `sync`, `teardown`, `workflow`, `workflows`
- Added `OrderedGroup` class to preserve command registration order instead of alphabetizing
- Commands now appear in intuitive sequence matching typical workflow lifecycle

**Impact:** Users see commands in a more natural, task-oriented order when running `mcli --help`

### Bug Fixes

#### Notebook Discovery in .mcli Directories
- **Fixed script sync hidden directory bug**: Script sync was incorrectly skipping all files in directories starting with `.` (dot), including `.mcli/workflows/`
- **Updated hidden file check** to only skip hidden files/directories WITHIN the commands directory, not the directory itself
- **Added .ipynb file scanning** in `load_all_commands()` to discover Jupyter notebooks alongside JSON workflows
- **Implemented notebook registration** with proper `type='notebook'` metadata and registration via `register_notebook_command_with_click()`

**Impact:** Users can now create notebooks in `.mcli/workflows/` and discover them with `mcli sync`

## Files Changed

### Modified
- `src/mcli/app/main.py`
  - Added `OrderedGroup` class for command ordering
  - Reordered command registration to match new logical sequence

- `src/mcli/lib/script_sync.py`
  - Fixed relative path checking for hidden files (lines 431-439)
  - Now uses relative parts from commands_dir instead of absolute path parts

- `src/mcli/lib/custom_commands.py`
  - Added `.ipynb` file scanning in `load_all_commands()` (lines 153-163)
  - Updated `load_command()` to handle notebook files (lines 119-132)
  - Added notebook type checking in `load_custom_commands()` (lines 657-675)

## Workflow

### Before
```bash
# Notebooks in .mcli/workflows/ were not discovered
$ ls .mcli/workflows/
ingestion.ipynb  analysis.ipynb

$ mcli run --help
# ❌ Notebooks don't appear
```

### After
```bash
$ ls .mcli/workflows/
ingestion.ipynb  analysis.ipynb

$ mcli sync
✓ Synced 2 script(s) to JSON
  • ingestion.ipynb
  • analysis.ipynb

$ mcli run --help
# ✅ Notebooks now appear as commands
```

## Migration Notes

No breaking changes. This release is fully backward compatible with 7.18.0.

Users with existing notebooks in `.mcli/workflows/` should run `mcli sync` to discover them.

## Testing

- ✅ All CLI tests passing (11/11)
- ✅ Python 3.9, 3.10, 3.11, 3.12 tests passing
- ✅ CodeQL security analysis passed
- ✅ Security scanning passed

## Known Issues

None

## Contributors

- Luis Fernandez de la Vara

---

**Full Changelog:** https://github.com/gwicho38/mcli/compare/v7.18.0...v7.19.0
