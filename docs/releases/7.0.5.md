# MCLI Framework 7.0.5 Release Notes

**Release Date:** October 1, 2025
**Previous Version:** 7.0.4

## Bug Fixes

### Fixed `mcli self logs` Command

**Issue:** The `mcli self logs` command was showing "❌ Logs directory not found" error when run from a uv tool installation.

**Root Cause:** The logs command was using incorrect path detection logic that looked for logs in:
1. Project root (5 levels up from the source file) - only works in development mode
2. Current working directory - not where logs are actually stored

This logic failed when mcli was installed as a uv tool because the package structure is different from the development repo structure.

**Fix:** Updated the logs command to use the standard `get_logs_dir()` function from `mcli.lib.paths`, which correctly returns `~/.mcli/logs` regardless of installation method.

**Files Changed:**
- `src/mcli/self/self_cmd.py` - Updated logs command to use `get_logs_dir()`
- `tests/test_self.py` - Added tests for logs command

**Testing:**
- ✅ Added `test_logs_help()` - Verifies help text displays correctly
- ✅ Added `test_logs_uses_correct_directory()` - Verifies correct logs directory is used
- ✅ All tests passing

## Changes Summary

### Modified Files

#### `src/mcli/self/self_cmd.py`
```diff
- # Find the logs directory
- current_file = Path(__file__)
- # Go up 5 levels: file -> self -> mcli -> src -> repo_root
- project_root = current_file.parents[4]
- logs_dir = project_root / "logs"
-
- # Alternative: try current working directory first
- if not logs_dir.exists():
-     logs_dir = Path.cwd() / "logs"
+ # Import get_logs_dir to get the correct logs directory
+ from mcli.lib.paths import get_logs_dir
+
+ # Get the logs directory (creates it if it doesn't exist)
+ logs_dir = get_logs_dir()
```

#### `tests/test_self.py`
- Added `test_logs_help()` test
- Added `test_logs_uses_correct_directory()` test

## Upgrade Instructions

### Via uv (Recommended)
```bash
uv tool install mcli-framework --force
```

### Via pip
```bash
pip install --upgrade mcli-framework
```

### Via mcli self-update
```bash
mcli self update
```

## Verification

After upgrading, verify the fix:
```bash
# Should show logs without error
mcli self logs

# Should show correct logs directory
ls -la ~/.mcli/logs/
```

## Log Policy Reminder

Total logs have a default max size of 1 GB. Log files are stored in `~/.mcli/logs/` with the naming convention:
- `mcli_YYYYMMDD.log` - Main application logs
- `mcli_system_YYYYMMDD.log` - System-level logs
- `mcli_trace_YYYYMMDD.log` - Trace-level logs

## Installation Methods

All installation methods now support version 7.0.5:

1. **PyPI** - `uv tool install mcli-framework`
2. **GitHub** - `uv tool install git+https://github.com/gwicho38/mcli.git`
3. **Homebrew** - `brew tap gwicho38/mcli && brew install mcli` (experimental)

## Known Issues

None in this release.

## Contributors

- Luis Fernandez de la Vara

## Links

- [GitHub Repository](https://github.com/gwicho38/mcli)
- [PyPI Package](https://pypi.org/project/mcli-framework/)
- [Issue Tracker](https://github.com/gwicho38/mcli/issues)
